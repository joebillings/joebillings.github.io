<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Guppy Books</title>
        <meta name="description" content="Guppy Books.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" href="css/main.css">
        <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    </head>
    <body class="">
        <div class="container pr-4 pb-3 pl-4">
            <div class="d-flex row align-items-center mt-5 pt-5 pb-3">
                <img src="resources/guppy-books.png" class="m-auto logo">
            </div>
            <h2 class="mt-3 pt-3 text-center">Nimble. Bespoke. Colourful.</h2>
            <h2 class="mt-3 text-center">And coming soonâ€¦</h2>
        </div>
        <script>
            var scroll = Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop);
            
            if(scroll > $(".header").outerHeight())
                $(".header").addClass("sticky-top");

            $.darkSrcsWithOptionalSetter = function(setSrc) {
                var srcArray = [];
                $("[data-dark-variant-available]").attr("src", function() {
                    var src = this.src.split(".");
                    src[src.length-2] = src[src.length-2] + "-dark";
                    srcArray.push(src.join("."));
                    if(setSrc)
                        return srcArray[srcArray.length-1];
                });
                return srcArray;
            }

            $.preloadImages = function(imagesArray) {
                for (var i = 0; i < imagesArray.length; i++) {
                    $("<img />").attr("src", imagesArray[i]);
                }
            }

            $.preloadImages($.darkSrcsWithOptionalSetter());

            $(document).scroll(function(){
                var newScroll = Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop);
                if(newScroll > scroll && newScroll > + $(".header").outerHeight()) {
                    $(".header").on("transitionend", function() {
                        $(".header").addClass("sticky-top");
                    });
                    $(".header").addClass("hidden");
                    scroll = newScroll;
                }
                else if(newScroll === 0) {
                    $(".header").removeClass("sticky-top");
                    scroll = newScroll;
                }
                else if(newScroll != $(document).outerHeight() - $("body").outerHeight()){
                    $(".header").removeClass("hidden");
                    scroll = newScroll;   
                }
            });
            $(".dark-mode").click(function(e){
                var $this = $(this),
                    $body = $("body");
                if($body.hasClass("dark")) {
                    $body.removeClass("dark");
                    $this.text("Dark Mode")
                        .addClass("btn-dark")
                        .removeClass("btn-light");
                    $("[data-dark-variant-available]").attr("src", function() {
                        return this.src.replace("-dark.", ".");
                    });
                }
                else {
                    $body.addClass("dark");
                    $this.text("Light Mode")
                        .addClass("btn-light")
                        .removeClass("btn-dark");
                    $.darkSrcsWithOptionalSetter(true);
                    // $("[data-dark-variant-available]").attr("src", function() {
                    //     var src = this.src.split(".");
                    //     src[src.length-2] = src[src.length-2] + "-dark";
                    //     return src.join(".");
                    // });
                }
            });
        </script>
    </body>
</html>